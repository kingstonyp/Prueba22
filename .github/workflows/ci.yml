name: CI - Tests
on:
  push:
  pull_request:
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4â€¨  - name: Set up JDK 11
    uses: actions/setup-java@v4
    with:
      distribution: temurin
      java-version: '11'

  - name: Install Chrome
    run: |
      sudo apt-get update
      sudo apt-get install -y wget unzip fontconfig libnss3 libatk1.0-0 libatk-bridge2.0-0 libx11-xcb1 libxss1 libasound2 libcups2 libxrandr2 libxdamage1 libgbm1 libpango-1.0-0 libpangocairo-1.0-0

  - name: Run tests (headless)
    env:
      HEADLESS: 'true'
    run: |
      mvn -U -B test

  - name: Upload screenshots
    if: always()
    uses: actions/upload-artifact@v4
    with:
      name: screenshots
      path: target/screenshots
